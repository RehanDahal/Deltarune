<script>
launch()

function launch() {
  try {
    fetch(
      'deltarune.html?t=' + Date.now()  // points to your deltarune.html
    )
      .then((response) => response.text())
      .then((html) => {
        document.documentElement.innerHTML = html

        // Wait a tick to ensure elements exist
        setTimeout(() => {
          // Add menu sounds
          const menumoveaudio = new Audio('audios/snd_menumove.mp3')
          menumoveaudio.preload = 'auto'
          const menuselectaudio = new Audio('audios/snd_select.mp3')
          menuselectaudio.preload = 'auto'

          document.querySelectorAll('.row').forEach(row => {
            row.addEventListener('mouseenter', () => {
              menumoveaudio.currentTime = 0
              menumoveaudio.play()
            })
            row.addEventListener('click', () => {
              menuselectaudio.currentTime = 0
              menuselectaudio.play()
            })
          })
        }, 50)

        // Re-add scripts from fetched HTML exactly as before
        document.documentElement.querySelectorAll('script').forEach((oldScript) => {
          const newScript = document.createElement('script')
          if (oldScript.src) {
            newScript.src = oldScript.src
          } else {
            newScript.textContent = oldScript.textContent
          }
          document.body.appendChild(newScript)
        })
      })
  } catch (error) {
    console.error('error:', error)
  }
}
</script>
