<script>
launch()

function launch() {
  try {
    fetch(
      'deltarune.html?t=' + Date.now() // points to your local deltarune.html
    )
      .then((response) => response.text())
      .then((html) => {
        document.documentElement.innerHTML = html

        // Add main menu sounds
        const drone = document.createElement('audio')
        drone.id = 'drone'
        drone.src = 'audios/AUDIO_DRONE.ogg'
        drone.loop = true
        drone.autoplay = true
        drone.hidden = true
        document.body.appendChild(drone)

        const muteBtn = document.createElement('button')
        muteBtn.id = 'mute'
        muteBtn.textContent = 'ðŸ”Š'
        document.body.appendChild(muteBtn)

        muteBtn.addEventListener('click', () => {
          drone.muted = !drone.muted
          muteBtn.textContent = drone.muted ? 'ðŸ”Š' : 'ðŸ”‡'
        })

        // Re-add scripts from fetched HTML
        document.documentElement.querySelectorAll('script').forEach((oldScript) => {
          const newScript = document.createElement('script')
          if (oldScript.src) {
            newScript.src = oldScript.src
          } else {
            newScript.textContent = oldScript.textContent
          }
          document.body.appendChild(newScript)
        })
      })
  } catch (error) {
    console.error('error:', error)
  }
}
</script>
