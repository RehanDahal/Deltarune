<script>
launch()

function launch() {
  try {
    fetch(
      'deltarune.html?t=' + Date.now()  // points to your deltarune.html
    )
      .then((response) => response.text())
      .then((html) => {
        document.documentElement.innerHTML = html

        // Add main menu sound only
        const audio = document.createElement('audio')
        audio.id = 'drone'
        audio.src = 'audios/AUDIO_DRONE.ogg'
        audio.loop = true
        audio.autoplay = true
        audio.hidden = true
        document.body.appendChild(audio)

        const muteBtn = document.createElement('button')
        muteBtn.id = 'mute'
        muteBtn.textContent = 'ðŸ”Š'
        document.body.appendChild(muteBtn)

        muteBtn.addEventListener('click', () => {
          audio.muted = !audio.muted
          muteBtn.textContent = audio.muted ? 'ðŸ”Š' : 'ðŸ”‡'
        })

        // Re-add scripts from fetched HTML exactly as before
        document.documentElement.querySelectorAll('script').forEach((oldScript) => {
          const newScript = document.createElement('script')
          if (oldScript.src) {
            newScript.src = oldScript.src
          } else {
            newScript.textContent = oldScript.textContent
          }
          document.body.appendChild(newScript)
        })
      })
  } catch (error) {
    console.error('error:', error)
  }
}
</script>
